//# sourceMappingURL=ng-file-upload.js.map
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(p){return function(r,v){if("__setXHR_"===r){var k=v(this);k instanceof Function&&k(this)}else p.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="5.0.9";
ngFileUpload.service("Upload",["$http","$q","$timeout",function(p,r,v){function k(a){a.method=a.method||"POST";a.headers=a.headers||{};var c=r.defer(),b=c.promise;a.headers.__setXHR_=function(){return function(d){d&&(a.__XHR=d,a.xhrFn&&a.xhrFn(d),d.upload.addEventListener("progress",function(e){e.config=a;c.notify?c.notify(e):b.progressFunc&&v(function(){b.progressFunc(e)})},!1),d.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=a,c.notify?c.notify(e):b.progressFunc&&v(function(){b.progressFunc(e)}))},
!1))}};p(a).then(function(a){c.resolve(a)},function(a){c.reject(a)},function(a){c.notify(a)});b.success=function(c){b.then(function(b){c(b.data,b.status,b.headers,a)});return b};b.error=function(c){b.then(null,function(b){c(b.data,b.status,b.headers,a)});return b};b.progress=function(a){b.progressFunc=a;b.then(null,null,function(b){a(b)});return b};b.abort=function(){a.__XHR&&v(function(){a.__XHR.abort()});return b};b.xhr=function(c){a.xhrFn=function(a){return function(){a&&a.apply(b,arguments);c.apply(b,
arguments)}}(a.xhrFn);return b};return b}this.upload=function(a){function c(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var g in d)d.hasOwnProperty(g)&&c(b,d[g],e+"["+g+"]");else b.append(e,d);else d=angular.isString(d)?d:JSON.stringify(d),"json-blob"===a.sendFieldsAs?b.append(e,new Blob([d],{type:"application/json"})):b.append(e,d)}a.headers=a.headers||{};a.headers["Content-Type"]=void 0;
a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[];a.transformRequest.push(function(b){var d=new FormData,e={},g;for(g in a.fields)a.fields.hasOwnProperty(g)&&(e[g]=a.fields[g]);b&&(e.data=b);for(g in e)e.hasOwnProperty(g)&&(b=e[g],a.formDataAppender?a.formDataAppender(d,g,b):c(d,b,g));if(null!=a.file)if(e=a.fileFormDataName||"file",angular.isArray(a.file))for(g=angular.isString(e),b=0;b<a.file.length;b++)d.append(g?e:e[b],a.file[b],
a.fileName&&a.fileName[b]||a.file[b].name);else d.append(e,a.file,a.fileName||a.file.name);return d});return k(a)};this.http=function(a){a.transformRequest=a.transformRequest||function(a){return window.ArrayBuffer&&a instanceof window.ArrayBuffer||a instanceof Blob?a:p.defaults.transformRequest[0](arguments)};return k(a)}}]);
(function(){function p(a,c,b,d,e,g,f){function t(){return"input"===c[0].tagName.toLowerCase()&&b.type&&"file"===b.type.toLowerCase()}function l(c){if(!m){m=!0;try{for(var f=c.__files_||c.target&&c.target.files,x=[],l=[],n=0;n<f.length;n++){var h=f.item(n);v(a,e,b,h,c)?x.push(h):l.push(h)}k(e,g,a,d,b,b.ngfChange||b.ngfSelect,x,l,c);0===x.length&&(c.target.value=x)}finally{m=!1}}}function h(d){b.ngfMultiple&&d.attr("multiple",e(b.ngfMultiple)(a));b.ngfCapture&&d.attr("capture",e(b.ngfCapture)(a));b.accept&&
d.attr("accept",b.accept);for(var g=0;g<c[0].attributes.length;g++){var f=c[0].attributes[g];(t()&&"type"!==f.name||"type"!==f.name&&"class"!==f.name&&"id"!==f.name&&"style"!==f.name)&&d.attr(f.name,f.value)}}function n(b,d){if(!d&&(b||t()))return c.$$ngfRefElem||c;var e=angular.element('<input type="file">');h(e);t()?(c.replaceWith(e),c=e,e.attr("__ngf_gen__",!0),f(c)(a)):(e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("z-index",
"-100000").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),c.$$ngfRefElem&&c.$$ngfRefElem.remove(),c.$$ngfRefElem=e,document.body.appendChild(e[0]));return e}function q(f){function h(a){a&&m[0].click();!t()&&a||c.bind("click touchend",q)}if(c.attr("disabled")||p)return!1;null!=f&&(f.preventDefault(),f.stopPropagation());var x=!1!==e(b.ngfResetOnClick)(a),m=n(f,x);m&&(f&&!x||m.bind("change",l),f&&x&&!1!==e(b.ngfResetModelOnClick)(a)&&k(e,g,a,d,b,b.ngfChange||b.ngfSelect,
[],[],f,!0),r(navigator.userAgent)?setTimeout(function(){h(f)},0):h(f));return!1}if(!c.attr("__ngf_gen__")){a.$on("$destroy",function(){c.$$ngfRefElem&&c.$$ngfRefElem.remove()});var p=!1;-1===b.ngfSelect.search(/\W+$files\W+/)&&a.$watch(b.ngfSelect,function(a){p=!1===a});var m=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(c,n,h,l):q()}}function r(a){var c=a.match(/Android[^\d]*(\d+)\.(\d+)/);return c&&2<c.length?4>parseInt(c[1])||4===parseInt(c[1])&&4>parseInt(c[2]):/.*Windows.*Safari.*/.test(a)}
ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile",function(a,c,b){return{restrict:"AEC",require:"?ngModel",link:function(d,e,g,f){p(d,e,g,f,a,c,b)}}}]);ngFileUpload.validate=function(a,c,b,d,e){function g(a){if(2<a.length&&"/"===a[0]&&"/"===a[a.length-1])return a.substring(1,a.length-1);var b=a.split(","),c="";if(1<b.length)for(a=0;a<b.length;a++)c+="("+g(b[a])+")",a<b.length-1&&(c+="|");else 0===a.indexOf(".")&&(a="*"+a),c="^"+a.replace(/[.\\+*?\[\^\]$(){}=!<>|:\-]/g,"\\$&")+"$",
c=c.replace(/\\\*/g,".*").replace(/\\\?/g,".");return c}var f=c(b.ngfAccept)(a,{$file:d,$event:e}),t=c(b.ngfMaxSize)(a,{$file:d,$event:e})||9007199254740991;a=c(b.ngfMinSize)(a,{$file:d,$event:e})||-1;null!=f&&angular.isString(f)&&(f=new RegExp(g(f),"gi"),f=null!=d.type&&f.test(d.type.toLowerCase())||null!=d.name&&f.test(d.name.toLowerCase()));return(null==f||f)&&(null==d.size||d.size<t&&d.size>a)};ngFileUpload.updateModel=function(a,c,b,d,e,g,f,t,p,h){function n(){if(!0===a(e.ngfKeep)(b)){var h=
(d.$modelValue||[]).slice(0);if(f&&f.length)if(!0===a(e.ngfKeepDistinct)(b)){for(var n=h.length,m=0;m<f.length;m++){for(var y=0;y<n&&f[m].name!==h[y].name;y++);y===n&&h.push(f[m])}f=h}else f=h.concat(f);else f=h}d&&(a(e.ngModel).assign(b,f),c(function(){d&&d.$setViewValue(null!=f&&0===f.length?null:f)}));e.ngModelRejected&&a(e.ngModelRejected).assign(b,t);g&&a(g)(b,{$files:f,$rejectedFiles:t,$event:p})}h?n():c(function(){n()})};var v=ngFileUpload.validate,k=ngFileUpload.updateModel})();
(function(){function p(a,c,b,d,e,g,f){function p(c,d,h,m){function n(d){v(a,e,b,d,c)?k.push(d):r.push(d)}function t(a,b,c){if(null!=b)if(b.isDirectory){n({name:b.name,type:"directory",path:(c||"")+b.name});var d=b.createReader(),e=[];l++;var f=function(){d.readEntries(function(d){try{if(d.length)e=e.concat(Array.prototype.slice.call(d||[],0)),f();else{for(d=0;d<e.length;d++)t(a,e[d],(c?c:"")+b.name+"/");l--}}catch(g){l--,console.error(g)}},function(){l--})};f()}else l++,b.file(function(a){try{l--,
a.path=(c?c:"")+a.name,n(a)}catch(b){l--,console.error(b)}},function(){l--})}var k=[],r=[],u=c.dataTransfer.items,l=0;if(u&&0<u.length&&"file"!==f.protocol())for(var w=0;w<u.length;w++){if(u[w].webkitGetAsEntry&&u[w].webkitGetAsEntry()&&u[w].webkitGetAsEntry().isDirectory){var q=u[w].webkitGetAsEntry();if(q.isDirectory&&!h)continue;null!=q&&t(k,q)}else q=u[w].getAsFile(),null!=q&&n(q);if(!m&&0<k.length)break}else if(h=c.dataTransfer.files,null!=h)for(u=0;u<h.length&&(n(h.item(u)),m||!(0<k.length));u++);
var z=0;(function A(a){g(function(){if(l)2E4>10*z++&&A(10);else{if(!m&&1<k.length){for(w=0;"directory"===k[w].type;)w++;k=[k[w]]}d(k,r)}},a||0)})()}var l=r();b.dropAvailable&&g(function(){a[b.dropAvailable]?a[b.dropAvailable].value=l:a[b.dropAvailable]=l});if(l){var h=!1;-1===b.ngfDrop.search(/\W+$files\W+/)&&a.$watch(b.ngfDrop,function(a){h=!1===a});var n=null,q=e(b.ngfStopPropagation),z=1,m;c[0].addEventListener("dragover",function(d){if(!c.attr("disabled")&&!h){d.preventDefault();q(a)&&d.stopPropagation();
if(-1<navigator.userAgent.indexOf("Chrome")){var f=d.dataTransfer.effectAllowed;d.dataTransfer.dropEffect="move"===f||"linkMove"===f?"move":"copy"}g.cancel(n);if(!a.actualDragOverClass){var f=!0,k=d.dataTransfer.items;if(null!=k)for(var l=0;l<k.length&&f;l++)f=f&&("file"===k[l].kind||""===k[l].kind)&&v(a,e,b,k[l],d);if(d=e(b.ngfDragOverClass)(a,{$event:d}))d.delay&&(z=d.delay),d.accept&&(d=f?d.accept:d.reject);m=d||b.ngfDragOverClass||"dragover"}c.addClass(m)}},!1);c[0].addEventListener("dragenter",
function(b){c.attr("disabled")||h||(b.preventDefault(),q(a)&&b.stopPropagation())},!1);c[0].addEventListener("dragleave",function(){c.attr("disabled")||h||(n=g(function(){c.removeClass(m);m=null},z||1))},!1);c[0].addEventListener("drop",function(f){c.attr("disabled")||h||(f.preventDefault(),q(a)&&f.stopPropagation(),c.removeClass(m),m=null,p(f,function(c,h){k(e,g,a,d,b,b.ngfChange||b.ngfDrop,c,h,f)},!1!==e(b.ngfAllowDir)(a),b.multiple||e(b.ngfMultiple)(a)))},!1)}else!0===e(b.ngfHideOnDropNotAvailable)(a)&&
c.css("display","none")}function r(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}var v=ngFileUpload.validate,k=ngFileUpload.updateModel;ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location",function(a,c,b){return{restrict:"AEC",require:"?ngModel",link:function(d,e,g,f){p(d,e,g,f,a,c,b)}}}]);ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){r()&&c.css("display","none")}});ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout",function(a,
c){return function(b,d,e){if(r()){var g=a(e.ngfDropAvailable);c(function(){g(b);g.assign&&g.assign(b,!0)})}}}]);ngFileUpload.directive("ngfSrc",["$parse","$timeout",function(a,c){return{restrict:"AE",link:function(b,d,e){window.FileReader&&b.$watch(e.ngfSrc,function(g){g&&v(b,a,e,g,null)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||2E4>g.size)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||4E6>g.size)?c(function(){var a=window.URL||window.webkitURL;a&&a.createObjectURL?
d.attr("src",a.createObjectURL(g)):(a=new FileReader,a.readAsDataURL(g),a.onload=function(a){c(function(){d.attr("src",a.target.result)})})}):d.attr("src",e.ngfDefaultSrc||"")})}}}])})();