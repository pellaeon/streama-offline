//# sourceMappingURL=admin-episode-directive.js.map
angular.module("streama").directive("adminEpisode",["uploadService","modalService","apiService","$stateParams",function(e,c,f,g){return{restrict:"AE",templateUrl:"/streama/directive--admin-episode.htm",scope:{episode:"="},link:function(a,d,h){a.uploadStatus={};(function(){parseInt(g.episodeId)===a.episode.id&&(setTimeout(function(){var a=d.find(".media-list-item").offset().top;jQuery(".admin-content").scrollTop(a-55);d.addClass("highlight")},400),setTimeout(function(){d.removeClass("highlight")},
2E3))})();a.reportsForEpisode=function(){f.report.reportsById(a.episode.id).then(function(b){a.episode.reportCount=b.data.reportCount})}();a.editEpisode=function(a){c.videoModal(a,null,null,function(c){c.deleted&&(a.deleted=!0)})};a.openFileBrowser=function(){c.openFileBrowser(function(b){f.video.addFile(a.episode.id,b.id).then(function(){a.episode.videoFiles=a.episode.videoFiles||[];a.episode.videoFiles.push(b)})})};a.manageFiles=function(a){c.fileManagerModal(a)};a.upload=e.doUpload.bind(e,a.uploadStatus,
"video/uploadFile.json?id="+a.episode.id,function(b){a.uploadStatus.percentage=null;a.episode.videoFiles=a.episode.videoFiles||[];a.episode.videoFiles.push(b)},function(a){})}}}]);