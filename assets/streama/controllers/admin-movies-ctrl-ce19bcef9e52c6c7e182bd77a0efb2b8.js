//# sourceMappingURL=admin-movies-ctrl.js.map
angular.module("streama").controller("adminMoviesCtrl",["apiService","modalService","$state","mediaListService",function(c,d,g,f){var a=this;a.hasMovieDBKey=!0;a.searchText="Search Movie from collection or TheMovieDB...";a.createFromFiles=function(){d.createFromFilesModal("movie").then(function(b){c.movie.list().then(function(b){angular.extend(a.movie.list,b.data)})})};a.openMovieModal=function(){d.movieModal(null,function(a){g.go("admin.movie",{movieId:a.id})})};a.doSearch=function(b){a.movie.search();
if(a.hasMovieDBKey)return c.theMovieDb.search("movie",b).then(function(b){a.suggestedMovies=b.data})};a.alreadyAdded=function(b){console.log("%c movie","color: deeppink; font-weight: bold; text-shadow: 0 0 5px deeppink;",b);return b.id&&_.find(a.movie.list,{apiId:b.id.toString()})};a.addFromSuggested=function(b,d){var e=angular.copy(b),f=e.id;delete e.id;e.apiId=f;c.movie.save(e).then(function(b){d?g.go("admin.movie",{movieId:b.data.id}):a.movie.list.push(b.data)})};(function(){a.movie=f.init(c.movie.list);
c.theMovieDb.hasKey().then(function(b){b.data.key||(a.hasMovieDBKey=!1,a.searchText="Search Movie from collection...")})})()}]);