//# sourceMappingURL=admin-shows-ctrl.js.map
angular.module("streama").controller("adminShowsCtrl",["$scope","apiService","$state","modalService","mediaListService","$interval",function(a,c,g,d,f,h){a.loading=!1;a.bigLoading=!1;a.hasMovieDBKey=!0;a.searchText="Search Show from collection or TheMovieDB...";a.createFromFiles=function(){d.createFromFilesModal("tvShow").then(function(b){c.tvShow.list().then(function(b){angular.extend(a.shows,b.data)})})};c.theMovieDb.hasKey().then(function(b){b.data.key||(a.hasMovieDBKey=!1,a.searchText="Search Show from collection...")});
a.tvShow=f.init(c.tvShow.list,{sort:"name",order:"ASC"});a.openShowModal=function(){d.tvShowModal(null,function(a){g.go("admin.show",{showId:a.id})})};a.doSearch=function(b){a.tvShow.search();if(a.hasMovieDBKey&&b)return c.theMovieDb.search("tv",b).then(function(b){a.suggestedShows=b.data})};a.addFromSuggested=function(b,d){var e=angular.copy(b),f=e.id;delete e.id;e.apiId=f;c.tvShow.save(e).then(function(b){b=b.data;d?g.go("admin.show",{showId:b.id}):a.shows.push(b)})};a.alreadyAdded=function(b){return b.id&&
_.find(a.shows,{apiId:b.id.toString()})}}]);