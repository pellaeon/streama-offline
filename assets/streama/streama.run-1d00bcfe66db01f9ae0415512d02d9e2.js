//# sourceMappingURL=streama.run.js.map
angular.module("streama").run(["$window","$rootScope","$state","localStorageService","apiService","modalService","userService","profileService","$translate",function(k,a,c,l,e,m,n,f,p){function g(b){return _.find(a.settings,{name:b})||_.find(a.settings,{settingsKey:b})}function h(){f.getUserProfiles().then(function(b){var d=f.getCurrentProfile();d||c.go("sub-profiles");a.usersProfiles=b.data;a.currentProfile=d||a.usersProfiles[0];p.use(_.get(a,"currentProfile.profileLanguage")||_.get(a,"currentUser.language")||
"en")});a.setCurrentSubProfile=f.setCurrentProfile}a.baseData={};a.isCurrentState=function(a){return c.current.name==a};a.searchMedia=function(a){return e.dash.searchMedia(a).then(function(a){return a.data.movies.concat(a.data.shows)})};a.getSetting=g;a.selectFromSearch=function(a){m.mediaDetailModal({mediaId:a.id,mediaType:a.mediaType})};a.toggleGenreMenu=function(b){a.genreMenuOpen=b?!1:!a.genreMenuOpen};a.changeGenre=function(b){a.toggleGenreMenu(!0);c.go("dash",{genreId:b?b.id:null});a.$broadcast("changedGenre",
b)};a.changeDashType=function(a){c.go("dash",{dashType:a},{reload:!0})};a.isDashType=function(a){return _.get(c.params,"dashType")===a};a.loginUser=function(){k.location.assign("/login/login")};a.$on("streama.profiles.onChange",h);a.$on("$stateChangeSuccess",function(b,d){a.toggleGenreMenu(!0);"player"==d.name&&l.set("originUrl",location.href)});e.currentUser().then(function(b){n.setCurrentUser(b);e.settings.list().then(function(b){a.settings=b.data;a.isDownloadButtonVisible=g("player_showDownloadButton").parsedValue&&
(a.currentUser.isTrustedUser||g("player_downloadForAllUsers").parsedValue)})});h()}]);