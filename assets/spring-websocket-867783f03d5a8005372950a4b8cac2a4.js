//# sourceMappingURL=spring-websocket.js.map
var JSON;JSON||(JSON={});
(function(){function n(b,d){var p,w,r,D,E=k,m,f=d[b];f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(b));"function"==typeof g&&(f=g.call(d,b,f));switch(typeof f){case "string":return l(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);case "object":if(!f)return"null";k+=B;m=[];if("[object Array]"===Object.prototype.toString.apply(f)){D=f.length;for(p=0;p<D;p+=1)m[p]=n(p,f)||"null";r=0===m.length?"[]":k?"[\n"+k+m.join(",\n"+k)+"\n"+E+"]":
"["+m.join(",")+"]";k=E;return r}if(g&&"object"==typeof g)for(D=g.length,p=0;p<D;p+=1)"string"==typeof g[p]&&(w=g[p],r=n(w,f),r&&m.push(l(w)+(k?": ":":")+r));else for(w in f)Object.prototype.hasOwnProperty.call(f,w)&&(r=n(w,f),r&&m.push(l(w)+(k?": ":":")+r));r=0===m.length?"{}":k?"{\n"+k+m.join(",\n"+k)+"\n"+E+"}":"{"+m.join(",")+"}";k=E;return r}}function l(b){t.lastIndex=0;return t.test(b)?'"'+b.replace(t,function(b){var h=d[b];return"string"==typeof h?h:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+b+'"'}function b(b){return 10>b?"0"+b:b}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(d){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var u=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,B,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!=typeof JSON.stringify&&(JSON.stringify=function(b,d,p){var w;B=k="";if("number"==typeof p)for(w=0;w<p;w+=1)B+=" ";else"string"==typeof p&&(B=p);g=d;if(!d||"function"==typeof d||"object"==typeof d&&"number"==typeof d.length)return n("",{"":b});throw Error("JSON.stringify");});"function"!=
typeof JSON.parse&&(JSON.parse=function(b,d){function g(b,h){var k,m,f=b[h];if(f&&"object"==typeof f)for(k in f)Object.prototype.hasOwnProperty.call(f,k)&&(m=g(f,k),void 0!==m?f[k]=m:delete f[k]);return d.call(b,h,f)}var k;b=String(b);u.lastIndex=0;u.test(b)&&(b=b.replace(u,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return k=eval("("+b+")"),"function"==typeof d?g({"":k},""):k;throw new SyntaxError("JSON.parse");})})();
SockJS=function(){var n=document,l=window,b={},u=function(){};u.prototype.addEventListener=function(a,c){this._listeners||(this._listeners={});a in this._listeners||(this._listeners[a]=[]);var q=this._listeners[a];-1===b.arrIndexOf(q,c)&&q.push(c)};u.prototype.removeEventListener=function(a,c){if(this._listeners&&a in this._listeners){var q=this._listeners[a],e=b.arrIndexOf(q,c);-1!==e&&(1<q.length?this._listeners[a]=q.slice(0,e).concat(q.slice(e+1)):delete this._listeners[a])}};u.prototype.dispatchEvent=
function(a){var c=a.type,b=Array.prototype.slice.call(arguments,0);this["on"+c]&&this["on"+c].apply(this,b);if(this._listeners&&c in this._listeners)for(var e=0;e<this._listeners[c].length;e++)this._listeners[c][e].apply(this,b)};var t=function(a,c){this.type=a;if("undefined"!==typeof c)for(var b in c)c.hasOwnProperty(b)&&(this[b]=c[b])};t.prototype.toString=function(){var a=[],c;for(c in this)if(this.hasOwnProperty(c)){var b=this[c];"function"===typeof b&&(b="[function]");a.push(c+"="+b)}return"SimpleEvent("+
a.join(", ")+")"};var k=function(a){this._events=a||[];this._listeners={}};k.prototype.emit=function(a){this._verifyType(a);if(!this._nuked){var c=Array.prototype.slice.call(arguments,1);this["on"+a]&&this["on"+a].apply(this,c);if(a in this._listeners)for(var b=0;b<this._listeners[a].length;b++)this._listeners[a][b].apply(this,c)}};k.prototype.on=function(a,c){this._verifyType(a);this._nuked||(a in this._listeners||(this._listeners[a]=[]),this._listeners[a].push(c))};k.prototype._verifyType=function(a){-1===
b.arrIndexOf(this._events,a)&&b.log("Event "+JSON.stringify(a)+" not listed "+JSON.stringify(this._events)+" in "+this)};k.prototype.nuke=function(){this._nuked=!0;for(var a=0;a<this._events.length;a++)delete this[this._events[a]];this._listeners={}};b.random_string=function(a,c){c=c||37;var b,e=[];for(b=0;b<a;b++)e.push("abcdefghijklmnopqrstuvwxyz0123456789_".substr(Math.floor(Math.random()*c),1));return e.join("")};b.random_number=function(a){return Math.floor(Math.random()*a)};b.random_number_string=
function(a){var c=(""+(a-1)).length;return(Array(c+1).join("0")+b.random_number(a)).slice(-c)};b.getOrigin=function(a){return(a+"/").split("/").slice(0,3).join("/")};b.isSameOriginUrl=function(a,c){c||(c=l.location.href);return a.split("/").slice(0,3).join("/")===c.split("/").slice(0,3).join("/")};b.getParentDomain=function(a){return/^[0-9.]*$/.test(a)||/^\[/.test(a)||!/[.]/.test(a)?a:a.split(".").slice(1).join(".")};b.objectExtend=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a};
b.polluteGlobalNamespace=function(){"_jp"in l||(l._jp={})};b.closeFrame=function(a,c){return"c"+JSON.stringify([a,c])};b.userSetCode=function(a){return 1E3===a||3E3<=a&&4999>=a};b.countRTO=function(a){return 100<a?3*a:a+200};b.log=function(){l.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)};b.bind=function(a,c){return a.bind?a.bind(c):function(){return a.apply(c,arguments)}};b.flatUrl=function(a){return-1===a.indexOf("?")&&-1===a.indexOf("#")};b.amendUrl=function(a){var c=
n.location;if(!a)throw Error("Wrong url for SockJS");if(!b.flatUrl(a))throw Error("Only basic urls are supported in SockJS");0===a.indexOf("//")&&(a=c.protocol+a);0===a.indexOf("/")&&(a=c.protocol+"//"+c.host+a);return a=a.replace(/[/]+$/,"")};b.arrIndexOf=function(a,c){for(var b=0;b<a.length;b++)if(a[b]===c)return b;return-1};b.arrSkip=function(a,c){var q=b.arrIndexOf(a,c);return-1===q?a.slice():a.slice(0,q).concat(a.slice(q+1))};b.isArray=Array.isArray||function(a){return 0<={}.toString.call(a).indexOf("Array")};
b.delay=function(a,c){"function"===typeof a&&(c=a,a=0);return setTimeout(c,a)};var B=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\x00":"\\u0000","\u0001":"\\u0001","\u0002":"\\u0002","\u0003":"\\u0003","\u0004":"\\u0004","\u0005":"\\u0005","\u0006":"\\u0006","\u0007":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","\u000e":"\\u000e","\u000f":"\\u000f","\u0010":"\\u0010","\u0011":"\\u0011",
"\u0012":"\\u0012","\u0013":"\\u0013","\u0014":"\\u0014","\u0015":"\\u0015","\u0016":"\\u0016","\u0017":"\\u0017","\u0018":"\\u0018","\u0019":"\\u0019","\u001a":"\\u001a","\u001b":"\\u001b","\u001c":"\\u001c","\u001d":"\\u001d","\u001e":"\\u001e","\u001f":"\\u001f",'"':'\\"',"\\":"\\\\","\u007f":"\\u007f","\u0080":"\\u0080","\u0081":"\\u0081","\u0082":"\\u0082","\u0083":"\\u0083","\u0084":"\\u0084","\u0085":"\\u0085","\u0086":"\\u0086","\u0087":"\\u0087","\u0088":"\\u0088","\u0089":"\\u0089","\u008a":"\\u008a",
"\u008b":"\\u008b","\u008c":"\\u008c","\u008d":"\\u008d","\u008e":"\\u008e","\u008f":"\\u008f","\u0090":"\\u0090","\u0091":"\\u0091","\u0092":"\\u0092","\u0093":"\\u0093","\u0094":"\\u0094","\u0095":"\\u0095","\u0096":"\\u0096","\u0097":"\\u0097","\u0098":"\\u0098","\u0099":"\\u0099","\u009a":"\\u009a","\u009b":"\\u009b","\u009c":"\\u009c","\u009d":"\\u009d","\u009e":"\\u009e","\u009f":"\\u009f","\u00ad":"\\u00ad","\u0600":"\\u0600","\u0601":"\\u0601","\u0602":"\\u0602","\u0603":"\\u0603","\u0604":"\\u0604",
"\u070f":"\\u070f","\u17b4":"\\u17b4","\u17b5":"\\u17b5","\u200c":"\\u200c","\u200d":"\\u200d","\u200e":"\\u200e","\u200f":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","\u202a":"\\u202a","\u202b":"\\u202b","\u202c":"\\u202c","\u202d":"\\u202d","\u202e":"\\u202e","\u202f":"\\u202f","\u2060":"\\u2060","\u2061":"\\u2061","\u2062":"\\u2062","\u2063":"\\u2063","\u2064":"\\u2064","\u2065":"\\u2065","\u2066":"\\u2066","\u2067":"\\u2067","\u2068":"\\u2068","\u2069":"\\u2069","\u206a":"\\u206a","\u206b":"\\u206b",
"\u206c":"\\u206c","\u206d":"\\u206d","\u206e":"\\u206e","\u206f":"\\u206f","\ufeff":"\\ufeff","\ufff0":"\\ufff0","\ufff1":"\\ufff1","\ufff2":"\\ufff2","\ufff3":"\\ufff3","\ufff4":"\\ufff4","\ufff5":"\\ufff5","\ufff6":"\\ufff6","\ufff7":"\\ufff7","\ufff8":"\\ufff8","\ufff9":"\\ufff9","\ufffa":"\\ufffa","\ufffb":"\\ufffb","\ufffc":"\\ufffc","\ufffd":"\\ufffd","\ufffe":"\\ufffe","\uffff":"\\uffff"},g=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,
h,y=JSON&&JSON.stringify||function(a){B.lastIndex=0;B.test(a)&&(a=a.replace(B,function(a){return d[a]}));return'"'+a+'"'},p=function(a){var c,b={},e=[];for(c=0;65536>c;c++)e.push(String.fromCharCode(c));a.lastIndex=0;e.join("").replace(a,function(a){b[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);return""});a.lastIndex=0;return b};b.quote=function(a){a=y(a);g.lastIndex=0;if(!g.test(a))return a;h||(h=p(g));return a.replace(g,function(a){return h[a]})};var w="websocket xdr-streaming xhr-streaming iframe-eventsource iframe-htmlfile xdr-polling xhr-polling iframe-xhr-polling jsonp-polling".split(" ");
b.probeProtocols=function(){for(var a={},c=0;c<w.length;c++){var b=w[c];a[b]=f[b]&&f[b].enabled()}return a};b.detectProtocols=function(a,c,b){var e={},G=[];c||(c=w);for(var d=0;d<c.length;d++){var f=c[d];e[f]=a[f]}var g=function(a){var c=a.shift();e[c]?G.push(c):0<a.length&&g(a)};!1!==b.websocket&&g(["websocket"]);e["xhr-streaming"]&&!b.null_origin?G.push("xhr-streaming"):!e["xdr-streaming"]||b.cookie_needed||b.null_origin?g(["iframe-eventsource","iframe-htmlfile"]):G.push("xdr-streaming");e["xhr-polling"]&&
!b.null_origin?G.push("xhr-polling"):!e["xdr-polling"]||b.cookie_needed||b.null_origin?g(["iframe-xhr-polling","jsonp-polling"]):G.push("xdr-polling");return G};b.createHook=function(){var a="a"+b.random_string(8);if(!("_sockjs_global"in l)){var c={};l._sockjs_global=function(a){a in c||(c[a]={id:a,del:function(){delete c[a]}});return c[a]}}return l._sockjs_global(a)};b.attachMessage=function(a){b.attachEvent("message",a)};b.attachEvent=function(a,c){"undefined"!==typeof l.addEventListener?l.addEventListener(a,
c,!1):(n.attachEvent("on"+a,c),l.attachEvent("on"+a,c))};b.detachMessage=function(a){b.detachEvent("message",a)};b.detachEvent=function(a,c){"undefined"!==typeof l.addEventListener?l.removeEventListener(a,c,!1):(n.detachEvent("on"+a,c),l.detachEvent("on"+a,c))};var r={},D=!1,E=function(){for(var a in r)r[a](),delete r[a]};b.attachEvent("unload",function(){D||(D=!0,E())});b.unload_add=function(a){var c=b.random_string(8);r[c]=a;D&&b.delay(E);return c};b.unload_del=function(a){a in r&&delete r[a]};
b.createIframe=function(a,c){var q=n.createElement("iframe"),e,d,f=function(){clearTimeout(e);try{q.onload=null}catch(a){}q.onerror=null},g=function(){q&&(f(),setTimeout(function(){q&&q.parentNode.removeChild(q);q=null},0),b.unload_del(d))},h=function(a){q&&(g(),c(a))};q.src=a;q.style.display="none";q.style.position="absolute";q.onerror=function(){h("onerror")};q.onload=function(){clearTimeout(e);e=setTimeout(function(){h("onload timeout")},2E3)};n.body.appendChild(q);e=setTimeout(function(){h("timeout")},
15E3);d=b.unload_add(g);return{post:function(a,c){try{q&&q.contentWindow&&q.contentWindow.postMessage(a,c)}catch(b){}},cleanup:g,loaded:f}};b.createHtmlfile=function(a,c){var q=new ActiveXObject("htmlfile"),e,d,f,g=function(){clearTimeout(e)},h=function(){q&&(g(),b.unload_del(d),f.parentNode.removeChild(f),f=q=null,CollectGarbage())};q.open();q.write('<html><script>document.domain="'+document.domain+'";\x3c/script></html>');q.close();q.parentWindow._jp=l._jp;var k=q.createElement("div");q.body.appendChild(k);
f=q.createElement("iframe");k.appendChild(f);f.src=a;e=setTimeout(function(){q&&(h(),c("timeout"))},15E3);d=b.unload_add(h);return{post:function(a,c){try{f&&f.contentWindow&&f.contentWindow.postMessage(a,c)}catch(b){}},cleanup:h,loaded:g}};var m=function(){};m.prototype=new k(["chunk","finish"]);m.prototype._start=function(a,c,q,e){var d=this;try{d.xhr=new XMLHttpRequest}catch(f){}if(!d.xhr)try{d.xhr=new l.ActiveXObject("Microsoft.XMLHTTP")}catch(f){}if(l.ActiveXObject||l.XDomainRequest)c+=(-1===
c.indexOf("?")?"?":"&")+"t="+ +new Date;d.unload_ref=b.unload_add(function(){d._cleanup(!0)});try{d.xhr.open(a,c,!0)}catch(f){d.emit("finish",0,"");d._cleanup();return}e&&e.no_credentials||(d.xhr.withCredentials="true");if(e&&e.headers)for(var g in e.headers)d.xhr.setRequestHeader(g,e.headers[g]);d.xhr.onreadystatechange=function(){if(d.xhr){var a=d.xhr;switch(a.readyState){case 3:try{var c=a.status,b=a.responseText}catch(e){}1223===c&&(c=204);b&&0<b.length&&d.emit("chunk",c,b);break;case 4:c=a.status,
1223===c&&(c=204),d.emit("finish",c,a.responseText),d._cleanup(!1)}}};d.xhr.send(q)};m.prototype._cleanup=function(a){if(this.xhr){b.unload_del(this.unload_ref);this.xhr.onreadystatechange=function(){};if(a)try{this.xhr.abort()}catch(c){}this.unload_ref=this.xhr=null}};m.prototype.close=function(){this.nuke();this._cleanup(!0)};(b.XHRCorsObject=function(){var a=this,c=arguments;b.delay(function(){a._start.apply(a,c)})}).prototype=new m;(b.XHRLocalObject=function(a,c,d){var e=this;b.delay(function(){e._start(a,
c,d,{no_credentials:!0})})}).prototype=new m;m=b.XDRObject=function(a,c,d){var e=this;b.delay(function(){e._start(a,c,d)})};m.prototype=new k(["chunk","finish"]);m.prototype._start=function(a,c,d){var e=this,f=new XDomainRequest;c+=(-1===c.indexOf("?")?"?":"&")+"t="+ +new Date;var g=f.ontimeout=f.onerror=function(){e.emit("finish",0,"");e._cleanup(!1)};f.onprogress=function(){e.emit("chunk",200,f.responseText)};f.onload=function(){e.emit("finish",200,f.responseText);e._cleanup(!1)};e.xdr=f;e.unload_ref=
b.unload_add(function(){e._cleanup(!0)});try{e.xdr.open(a,c),e.xdr.send(d)}catch(h){g()}};m.prototype._cleanup=function(a){if(this.xdr){b.unload_del(this.unload_ref);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(a)try{this.xdr.abort()}catch(c){}this.unload_ref=this.xdr=null}};m.prototype.close=function(){this.nuke();this._cleanup(!0)};b.isXHRCorsCapable=function(){return l.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:l.XDomainRequest&&n.domain?2:x.enabled()?
3:4};var f=function(a,c,d){if(this===l)return new f(a,c,d);var e=this,g;e._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0};d&&b.objectExtend(e._options,d);e._base_url=b.amendUrl(a);e._server=e._options.server||b.random_number_string(1E3);e._options.protocols_whitelist&&e._options.protocols_whitelist.length?g=e._options.protocols_whitelist:(g="string"===typeof c&&0<c.length?[c]:b.isArray(c)?c:null)&&e._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.');
e._protocols=[];e.protocol=null;e.readyState=f.CONNECTING;e._ir=T(e._base_url);e._ir.onfinish=function(a,c){e._ir=null;a?(e._options.info&&(a=b.objectExtend(a,e._options.info)),e._options.rtt&&(c=e._options.rtt),e._applyInfo(a,c,g),e._didClose()):e._didClose(1002,"Can't connect to server",!0)}};f.prototype=new u;f.version="0.3.4";f.CONNECTING=0;f.OPEN=1;f.CLOSING=2;f.CLOSED=3;f.prototype._debug=function(){this._options.debug&&b.log.apply(b,arguments)};f.prototype._dispatchOpen=function(){this.readyState===
f.CONNECTING?(this._transport_tref&&(clearTimeout(this._transport_tref),this._transport_tref=null),this.readyState=f.OPEN,this.dispatchEvent(new t("open"))):this._didClose(1006,"Server lost session")};f.prototype._dispatchMessage=function(a){this.readyState===f.OPEN&&this.dispatchEvent(new t("message",{data:a}))};f.prototype._dispatchHeartbeat=function(a){this.readyState===f.OPEN&&this.dispatchEvent(new t("heartbeat",{}))};f.prototype._didClose=function(a,c,d){var e=this;if(e.readyState!==f.CONNECTING&&
e.readyState!==f.OPEN&&e.readyState!==f.CLOSING)throw Error("INVALID_STATE_ERR");e._ir&&(e._ir.nuke(),e._ir=null);e._transport&&(e._transport.doCleanup(),e._transport=null);var g=new t("close",{code:a,reason:c,wasClean:b.userSetCode(a)});if(!b.userSetCode(a)&&e.readyState===f.CONNECTING&&!d){if(e._try_next_protocol(g))return;g=new t("close",{code:2E3,reason:"All transports failed",wasClean:!1,last_event:g})}e.readyState=f.CLOSED;b.delay(function(){e.dispatchEvent(g)})};f.prototype._didMessage=function(a){switch(a.slice(0,
1)){case "o":this._dispatchOpen();break;case "a":a=JSON.parse(a.slice(1)||"[]");for(var c=0;c<a.length;c++)this._dispatchMessage(a[c]);break;case "m":a=JSON.parse(a.slice(1)||"null");this._dispatchMessage(a);break;case "c":a=JSON.parse(a.slice(1)||"[]");this._didClose(a[0],a[1]);break;case "h":this._dispatchHeartbeat()}};f.prototype._try_next_protocol=function(a){var c=this;c.protocol&&(c._debug("Closed transport:",c.protocol,""+a),c.protocol=null);c._transport_tref&&(clearTimeout(c._transport_tref),
c._transport_tref=null);for(;;){a=c.protocol=c._protocols.shift();if(!a)return!1;if(f[a]&&!0===f[a].need_body&&(!n.body||"undefined"!==typeof n.readyState&&"complete"!==n.readyState))return c._protocols.unshift(a),c.protocol="waiting-for-load",b.attachEvent("load",function(){c._try_next_protocol()}),!0;if(f[a]&&f[a].enabled(c._options)){c._transport_tref=b.delay((c._options.rto||0)*(f[a].roundTrips||1)||5E3,function(){c.readyState===f.CONNECTING&&c._didClose(2007,"Transport timeouted")});var d=b.random_string(8),
d=c._base_url+"/"+c._server+"/"+d;c._debug("Opening transport:",a," url:"+d," RTO:"+c._options.rto);c._transport=new f[a](c,d,c._base_url);return!0}c._debug("Skipping transport:",a)}};f.prototype.close=function(a,c){if(a&&!b.userSetCode(a))throw Error("INVALID_ACCESS_ERR");if(this.readyState!==f.CONNECTING&&this.readyState!==f.OPEN)return!1;this.readyState=f.CLOSING;this._didClose(a||1E3,c||"Normal closure");return!0};f.prototype.send=function(a){if(this.readyState===f.CONNECTING)throw Error("INVALID_STATE_ERR");
this.readyState===f.OPEN&&this._transport.doSend(b.quote(""+a));return!0};f.prototype._applyInfo=function(a,c,d){this._options.info=a;this._options.rtt=c;this._options.rto=b.countRTO(c);this._options.info.null_origin=!n.domain;c=b.probeProtocols();this._protocols=b.detectProtocols(c,d,a)};m=f.websocket=function(a,c){var d=this,e=c+"/websocket",e="https"===e.slice(0,5)?"wss"+e.slice(5):"ws"+e.slice(4);d.ri=a;d.url=e;d.ws=new (l.WebSocket||l.MozWebSocket)(d.url);d.ws.onmessage=function(a){d.ri._didMessage(a.data)};
d.unload_ref=b.unload_add(function(){d.ws.close()});d.ws.onclose=function(){d.ri._didMessage(b.closeFrame(1006,"WebSocket connection broken"))}};m.prototype.doSend=function(a){this.ws.send("["+a+"]")};m.prototype.doCleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=null,a.close(),b.unload_del(this.unload_ref),this.unload_ref=this.ri=this.ws=null)};m.enabled=function(){return!(!l.WebSocket&&!l.MozWebSocket)};m.roundTrips=2;var v=function(){};v.prototype.send_constructor=function(a){this.send_buffer=
[];this.sender=a};v.prototype.doSend=function(a){this.send_buffer.push(a);this.send_stop||this.send_schedule()};v.prototype.send_schedule_wait=function(){var a=this,c;a.send_stop=function(){a.send_stop=null;clearTimeout(c)};c=b.delay(25,function(){a.send_stop=null;a.send_schedule()})};v.prototype.send_schedule=function(){var a=this;if(0<a.send_buffer.length){var c="["+a.send_buffer.join(",")+"]";a.send_stop=a.sender(a.trans_url,c,function(c,b){a.send_stop=null;!1===c?a.ri._didClose(1006,"Sending error "+
b):a.send_schedule_wait()});a.send_buffer=[]}};v.prototype.send_destructor=function(){this._send_stop&&this._send_stop();this._send_stop=null};var J=function(a,c,d){if(!("_send_form"in this)){var e=this._send_form=n.createElement("form"),f=this._send_area=n.createElement("textarea");f.name="d";e.style.display="none";e.style.position="absolute";e.method="POST";e.enctype="application/x-www-form-urlencoded";e.acceptCharset="UTF-8";e.appendChild(f);n.body.appendChild(e)}var e=this._send_form,f=this._send_area,
g="a"+b.random_string(8);e.target=g;e.action=a+"/jsonp_send?i="+g;var h;try{h=n.createElement('<iframe name="'+g+'">')}catch(k){h=n.createElement("iframe"),h.name=g}h.id=g;e.appendChild(h);h.style.display="none";try{f.value=c}catch(k){b.log("Your browser is seriously broken. Go home! "+k.message)}e.submit();var y=function(a){h.onerror&&(h.onreadystatechange=h.onerror=h.onload=null,b.delay(500,function(){h.parentNode.removeChild(h);h=null}),f.value="",d(!0))};h.onerror=h.onload=y;h.onreadystatechange=
function(a){"complete"==h.readyState&&y()};return y},I=function(a){return function(c,b,e){(new a("POST",c+"/xhr_send",b)).onfinish=function(a,c){e(200===a||204===a,"http status "+a)};return function(a){e(!1,a)}}},z=function(a,c){var d,e=n.createElement("script"),f,g=function(a){f&&(f.parentNode.removeChild(f),f=null);e&&(clearTimeout(d),e.parentNode.removeChild(e),e=e.onreadystatechange=e.onerror=e.onload=e.onclick=null,c(a),c=null)},h=!1,k=null;e.id="a"+b.random_string(8);e.src=a;e.type="text/javascript";
e.charset="UTF-8";e.onerror=function(a){k||(k=setTimeout(function(){h||g(b.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1E3))};e.onload=function(a){g(b.closeFrame(1006,"JSONP script loaded abnormally (onload)"))};e.onreadystatechange=function(a){if(/loaded|closed/.test(e.readyState)){if(e&&e.htmlFor&&e.onclick){h=!0;try{e.onclick()}catch(c){}}e&&g(b.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}};if("undefined"===typeof e.async&&n.attachEvent)if(/opera/i.test(navigator.userAgent))f=
n.createElement("script"),f.text="try{var a = document.getElementById('"+e.id+"'); if(a)a.onerror();}catch(x){};",e.async=f.async=!1;else{try{e.htmlFor=e.id,e.event="onclick"}catch(y){}e.async=!0}"undefined"!==typeof e.async&&(e.async=!0);d=setTimeout(function(){g(b.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35E3);var p=n.getElementsByTagName("head")[0];p.insertBefore(e,p.firstChild);f&&p.insertBefore(f,p.firstChild);return g},m=f["jsonp-polling"]=function(a,c){b.polluteGlobalNamespace();
this.ri=a;this.trans_url=c;this.send_constructor(J);this._schedule_recv()};m.prototype=new v;m.prototype._schedule_recv=function(){var a=this;a._recv_stop=U(a.trans_url+"/jsonp",z,function(c){a._recv_stop=null;c&&(a._is_closing||a.ri._didMessage(c));a._is_closing||a._schedule_recv()})};m.enabled=function(){return!0};m.need_body=!0;m.prototype.doCleanup=function(){this._is_closing=!0;this._recv_stop&&this._recv_stop();this.ri=this._recv_stop=null;this.send_destructor()};var U=function(a,c,d){var e=
"a"+b.random_string(6);a=a+"?c="+escape("_jp."+e);var f=0;c=c(a,function(a){switch(f){case 0:delete l._jp[e];d(a);break;case 1:d(a);f=2;break;case 2:delete l._jp[e]}});l._jp[e]=c;return function(){l._jp[e]&&(f=1,l._jp[e](b.closeFrame(1E3,"JSONP user aborted read")))}},m=function(){};m.prototype=new v;m.prototype.run=function(a,c,b,e,d){this.ri=a;this.trans_url=c;this.send_constructor(I(d));this.poll=new L(a,e,c+b,d)};m.prototype.doCleanup=function(){this.poll&&(this.poll.abort(),this.poll=null)};
var C=f["xhr-streaming"]=function(a,c){this.run(a,c,"/xhr_streaming",F,b.XHRCorsObject)};C.prototype=new m;C.enabled=function(){return l.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)};C.roundTrips=2;C.need_body=!0;v=f["xdr-streaming"]=function(a,c){this.run(a,c,"/xhr_streaming",F,b.XDRObject)};v.prototype=new m;v.enabled=function(){return!!l.XDomainRequest};v.roundTrips=2;var M=f["xhr-polling"]=function(a,c){this.run(a,c,"/xhr",F,b.XHRCorsObject)};M.prototype=
new m;M.enabled=C.enabled;M.roundTrips=2;C=f["xdr-polling"]=function(a,c){this.run(a,c,"/xhr",F,b.XDRObject)};C.prototype=new m;C.enabled=v.enabled;C.roundTrips=2;var x=function(){};x.prototype.i_constructor=function(a,c,d){var e=this;e.ri=a;e.origin=b.getOrigin(d);e.base_url=d;e.trans_url=c;a=d+"/iframe.html";e.ri._options.devel&&(a+="?t="+ +new Date);e.window_id=b.random_string(8);a+="#"+e.window_id;e.iframeObj=b.createIframe(a,function(a){e.ri._didClose(1006,"Unable to load an iframe ("+a+")")});
e.onmessage_cb=b.bind(e.onmessage,e);b.attachMessage(e.onmessage_cb)};x.prototype.doCleanup=function(){if(this.iframeObj){b.detachMessage(this.onmessage_cb);try{this.iframeObj.iframe.contentWindow&&this.postMessage("c")}catch(a){}this.iframeObj.cleanup();this.onmessage_cb=this.iframeObj=this.iframeObj=null}};x.prototype.onmessage=function(a){if(a.origin===this.origin){var c=a.data.slice(0,8),b=a.data.slice(8,9);a=a.data.slice(9);if(c===this.window_id)switch(b){case "s":this.iframeObj.loaded();this.postMessage("s",
JSON.stringify([f.version,this.protocol,this.trans_url,this.base_url]));break;case "t":this.ri._didMessage(a)}}};x.prototype.postMessage=function(a,c){this.iframeObj.post(this.window_id+a+(c||""),this.origin)};x.prototype.doSend=function(a){this.postMessage("m",a)};x.enabled=function(){var a=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"===typeof l.postMessage||"object"===typeof l.postMessage)&&!a};var N,O=function(a,c){parent!==l?parent.postMessage(N+
a+(c||""),"*"):b.log("Can't postMessage, no parent window.",a,c)},A=function(){};A.prototype._didClose=function(a,c){O("t",b.closeFrame(a,c))};A.prototype._didMessage=function(a){O("t",a)};A.prototype._doSend=function(a){this._transport.doSend(a)};A.prototype._doCleanup=function(){this._transport.doCleanup()};b.parent_origin=void 0;f.bootstrap_iframe=function(){var a;N=n.location.hash.slice(1);b.attachMessage(function(c){if(c.source===parent&&("undefined"===typeof b.parent_origin&&(b.parent_origin=
c.origin),c.origin===b.parent_origin)){var d=c.data.slice(0,8),e=c.data.slice(8,9);c=c.data.slice(9);if(d===N)switch(e){case "s":var g=JSON.parse(c),d=g[0],e=g[1];c=g[2];g=g[3];d!==f.version&&b.log('Incompatibile SockJS! Main site uses: "'+d+'", the iframe: "'+f.version+'".');if(!b.flatUrl(c)||!b.flatUrl(g)){b.log("Only basic urls are supported in SockJS");break}if(!b.isSameOriginUrl(c)||!b.isSameOriginUrl(g)){b.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([l.location.href,
c,g])+")");break}a=new A;a._transport=new A[e](a,c,g);break;case "m":a._doSend(c);break;case "c":a&&a._doCleanup(),a=null}}});O("s")};var H=function(a,c){var d=this;b.delay(function(){d.doXhr(a,c)})};H.prototype=new k(["finish"]);H.prototype.doXhr=function(a,c){var d=this,e=(new Date).getTime(),f=new c("GET",a+"/info"),g=b.delay(8E3,function(){f.ontimeout()});f.onfinish=function(a,c){clearTimeout(g);g=null;if(200===a){var b=(new Date).getTime()-e,f=JSON.parse(c);"object"!==typeof f&&(f={});d.emit("finish",
f,b)}else d.emit("finish")};f.ontimeout=function(){f.close();d.emit("finish")}};var R=function(a){var c=this,d=function(){var b=new x;b.protocol="w-iframe-info-receiver";var d=function(a){"string"===typeof a&&"m"===a.substr(0,1)?(a=JSON.parse(a.substr(1)),c.emit("finish",a[0],a[1])):c.emit("finish");b.doCleanup();b=null};b.i_constructor({_options:{},_didClose:d,_didMessage:d},a,a)};n.body?d():b.attachEvent("load",d)};R.prototype=new k(["finish"]);var S=function(){var a=this;b.delay(function(){a.emit("finish",
{},2E3)})};S.prototype=new k(["finish"]);var T=function(a){if(b.isSameOriginUrl(a))return new H(a,b.XHRLocalObject);switch(b.isXHRCorsCapable()){case 1:return new H(a,b.XHRLocalObject);case 2:return new H(a,b.XDRObject);case 3:return new R(a);default:return new S}};(A["w-iframe-info-receiver"]=function(a,c,d){(new H(d,b.XHRLocalObject)).onfinish=function(c,b){a._didMessage("m"+JSON.stringify([c,b]));a._didClose()}}).prototype.doCleanup=function(){};k=f["iframe-eventsource"]=function(){this.protocol=
"w-iframe-eventsource";this.i_constructor.apply(this,arguments)};k.prototype=new x;k.enabled=function(){return"EventSource"in l&&x.enabled()};k.need_body=!0;k.roundTrips=3;(A["w-iframe-eventsource"]=function(a,c){this.run(a,c,"/eventsource",P,b.XHRLocalObject)}).prototype=new m;k=f["iframe-xhr-polling"]=function(){this.protocol="w-iframe-xhr-polling";this.i_constructor.apply(this,arguments)};k.prototype=new x;k.enabled=function(){return l.XMLHttpRequest&&x.enabled()};k.need_body=!0;k.roundTrips=3;
(A["w-iframe-xhr-polling"]=function(a,c){this.run(a,c,"/xhr",F,b.XHRLocalObject)}).prototype=new m;k=f["iframe-htmlfile"]=function(){this.protocol="w-iframe-htmlfile";this.i_constructor.apply(this,arguments)};k.prototype=new x;k.enabled=function(){return x.enabled()};k.need_body=!0;k.roundTrips=3;(A["w-iframe-htmlfile"]=function(a,c){this.run(a,c,"/htmlfile",Q,b.XHRLocalObject)}).prototype=new m;var L=function(a,c,b,d){this.ri=a;this.Receiver=c;this.recv_url=b;this.AjaxObject=d;this._scheduleRecv()};
L.prototype._scheduleRecv=function(){var a=this,c=a.poll=new a.Receiver(a.recv_url,a.AjaxObject);c.onmessage=function(c){a.ri._didMessage(c.data)};c.onclose=function(b){a.poll=c=c.onmessage=c.onclose=null;a.poll_is_closing||("permanent"===b.reason?a.ri._didClose(1006,"Polling error ("+b.reason+")"):a._scheduleRecv())}};L.prototype.abort=function(){this.poll_is_closing=!0;this.poll&&this.poll.abort()};var P=function(a){var c=this,d=new EventSource(a);d.onmessage=function(a){c.dispatchEvent(new t("message",
{data:unescape(a.data)}))};c.es_close=d.onerror=function(a,f){var g=f?"user":2!==d.readyState?"network":"permanent";c.es_close=d.onmessage=d.onerror=null;d.close();d=null;b.delay(200,function(){c.dispatchEvent(new t("close",{reason:g}))})}};P.prototype=new u;P.prototype.abort=function(){this.es_close&&this.es_close({},!0)};var K,Q=function(a){var c=this;b.polluteGlobalNamespace();c.id="a"+b.random_string(6,26);a+=(-1===a.indexOf("?")?"?":"&")+"c="+escape("_jp."+c.id);if(void 0===K)if("ActiveXObject"in
l)try{K=!!new ActiveXObject("htmlfile")}catch(d){}else K=!1;var f=K?b.createHtmlfile:b.createIframe,e;l._jp[c.id]={start:function(){e.loaded()},message:function(a){c.dispatchEvent(new t("message",{data:a}))},stop:function(){c.iframe_close({},"network")}};c.iframe_close=function(a,b){e.cleanup();c.iframe_close=e=null;delete l._jp[c.id];c.dispatchEvent(new t("close",{reason:b}))};e=f(a,function(a){c.iframe_close({},"permanent")})};Q.prototype=new u;Q.prototype.abort=function(){this.iframe_close&&this.iframe_close({},
"user")};var F=function(a,c){var b=this,d=0;b.xo=new c("POST",a,null);b.xo.onchunk=function(a,c){if(200===a)for(;;){var f=c.slice(d),g=f.indexOf("\n");if(-1===g)break;d+=g+1;f=f.slice(0,g);b.dispatchEvent(new t("message",{data:f}))}};b.xo.onfinish=function(a,c){b.xo.onchunk(a,c);b.xo=null;b.dispatchEvent(new t("close",{reason:200===a?"network":"permanent"}))}};F.prototype=new u;F.prototype.abort=function(){this.xo&&(this.xo.close(),this.dispatchEvent(new t("close",{reason:"user"})),this.xo=null)};
f.getUtils=function(){return b};f.getIframeTransport=function(){return x};return f}();"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1);"function"===typeof define&&define.amd&&define("sockjs",[],function(){return SockJS});
(function(){var n,l,b,u={}.hasOwnProperty,t=[].slice;l=function(){function b(d,g,h){this.command=d;this.headers=null!=g?g:{};this.body=null!=h?h:""}var l;b.prototype.toString=function(){var d,g,h,y,p;d=[this.command];(h=!1===this.headers["content-length"]?!0:!1)&&delete this.headers["content-length"];p=this.headers;for(g in p)u.call(p,g)&&(y=p[g],d.push(""+g+":"+y));this.body&&!h&&d.push("content-length:"+b.sizeOfUTF8(this.body));d.push("\n"+this.body);return d.join("\n")};b.sizeOfUTF8=function(b){return b?
encodeURI(b).match(/%..|./g).length:0};l=function(d){var g,h,y,p,l,r,n,t,m;p=d.search(/\n\n/);l=d.substring(0,p).split("\n");y=l.shift();r={};g=function(b){return b.replace(/^\s+|\s+$/g,"")};m=l.reverse();h=0;for(t=m.length;h<t;h++)n=m[h],l=n.indexOf(":"),r[g(n.substring(0,l))]=g(n.substring(l+1));g="";p+=2;if(r["content-length"])g=parseInt(r["content-length"]),g=(""+d).substring(p,p+g);else for(h=null,h=l=p,n=d.length;p<=n?l<n:l>n;h=p<=n?++l:--l){h=d.charAt(h);if("\x00"===h)break;g+=h}return new b(y,
r,g)};b.unmarshall=function(b){var g,h;h=b.split(/\x00\n*/);b={frames:[],partial:""};var k,p,n,r;n=h.slice(0,-1);r=[];k=0;for(p=n.length;k<p;k++)g=n[k],r.push(l(g));b.frames=r;g=h.slice(-1)[0];"\n"===g||-1!==g.search(/\x00\n*$/)?b.frames.push(l(g)):b.partial=g;return b};b.marshall=function(d,g,h){return(new b(d,g,h)).toString()+"\x00"};return b}();n=function(){function k(b){this.ws=b;this.ws.binaryType="arraybuffer";this.counter=0;this.connected=!1;this.heartbeat={outgoing:1E4,incoming:1E4};this.maxWebSocketFrameSize=
16384;this.subscriptions={};this.partialData=""}var n;k.prototype.debug=function(b){var g;return"undefined"!==typeof window&&null!==window?null!=(g=window.console)?g.log(b):void 0:void 0};n=function(){return Date.now?Date.now():(new Date).valueOf};k.prototype._transmit=function(b,g,h){b=l.marshall(b,g,h);for("function"===typeof this.debug&&this.debug(">>> "+b);;)if(b.length>this.maxWebSocketFrameSize)this.ws.send(b.substring(0,this.maxWebSocketFrameSize)),b=b.substring(this.maxWebSocketFrameSize),
"function"===typeof this.debug&&this.debug("remaining = "+b.length);else return this.ws.send(b)};k.prototype._setupHeartbeat=function(d){var g,h,k,p;if((h=d.version)===b.VERSIONS.V1_1||h===b.VERSIONS.V1_2)if(g=function(){var b,g,h,k;h=d["heart-beat"].split(",");k=[];b=0;for(g=h.length;b<g;b++)p=h[b],k.push(parseInt(p));return k}(),h=g[0],g=g[1],0!==this.heartbeat.outgoing&&0!==g&&(k=Math.max(this.heartbeat.outgoing,g),"function"===typeof this.debug&&this.debug("send PING every "+k+"ms"),this.pinger=
b.setInterval(k,function(b){return function(){b.ws.send("\n");return"function"===typeof b.debug?b.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==h)return k=Math.max(this.heartbeat.incoming,h),"function"===typeof this.debug&&this.debug("check PONG every "+k+"ms"),this.ponger=b.setInterval(k,function(b){return function(){var d;d=n()-b.serverActivity;if(d>2*k)return"function"===typeof b.debug&&b.debug("did not receive server activity for the last "+d+"ms"),b.ws.close()}}(this))};
k.prototype._parseConnect=function(){var b,g,h,k;b=1<=arguments.length?t.call(arguments,0):[];k={};switch(b.length){case 2:k=b[0];g=b[1];break;case 3:b[1]instanceof Function?(k=b[0],g=b[1],h=b[2]):(k.login=b[0],k.passcode=b[1],g=b[2]);break;case 4:k.login=b[0];k.passcode=b[1];g=b[2];h=b[3];break;default:k.login=b[0],k.passcode=b[1],g=b[2],h=b[3],k.host=b[4]}return[k,g,h]};k.prototype.connect=function(){var d,g,h;d=1<=arguments.length?t.call(arguments,0):[];d=this._parseConnect.apply(this,d);h=d[0];
this.connectCallback=d[1];g=d[2];"function"===typeof this.debug&&this.debug("Opening Web Socket...");this.ws.onmessage=function(b){return function(d){var h,k,t,u,m,f,v,J,I,z;d="undefined"!==typeof ArrayBuffer&&d.data instanceof ArrayBuffer?(h=new Uint8Array(d.data),"function"===typeof b.debug?b.debug("--- got data length: "+h.length):void 0,function(){var b,d,f;f=[];b=0;for(d=h.length;b<d;b++)k=h[b],f.push(String.fromCharCode(k));return f}().join("")):d.data;b.serverActivity=n();if("\n"===d)"function"===
typeof b.debug&&b.debug("<<< PONG");else{"function"===typeof b.debug&&b.debug("<<< "+d);d=l.unmarshall(b.partialData+d);b.partialData=d.partial;I=d.frames;z=[];v=0;for(J=I.length;v<J;v++)switch(d=I[v],d.command){case "CONNECTED":"function"===typeof b.debug&&b.debug("connected to server "+d.headers.server);b.connected=!0;b._setupHeartbeat(d.headers);z.push("function"===typeof b.connectCallback?b.connectCallback(d):void 0);break;case "MESSAGE":f=d.headers.subscription;(m=b.subscriptions[f]||b.onreceive)?
(t=b,u=d.headers["message-id"],d.ack=function(b){null==b&&(b={});return t.ack(u,f,b)},d.nack=function(b){null==b&&(b={});return t.nack(u,f,b)},z.push(m(d))):z.push("function"===typeof b.debug?b.debug("Unhandled received MESSAGE: "+d):void 0);break;case "RECEIPT":z.push("function"===typeof b.onreceipt?b.onreceipt(d):void 0);break;case "ERROR":z.push("function"===typeof g?g(d):void 0);break;default:z.push("function"===typeof b.debug?b.debug("Unhandled frame: "+d):void 0)}return z}}}(this);this.ws.onclose=
function(b){return function(){var d;d="Whoops! Lost connection to "+b.ws.url;"function"===typeof b.debug&&b.debug(d);b._cleanUp();return"function"===typeof g?g(d):void 0}}(this);return this.ws.onopen=function(d){return function(){"function"===typeof d.debug&&d.debug("Web Socket Opened...");h["accept-version"]=b.VERSIONS.supportedVersions();h["heart-beat"]=[d.heartbeat.outgoing,d.heartbeat.incoming].join();return d._transmit("CONNECT",h)}}(this)};k.prototype.disconnect=function(b,g){null==g&&(g={});
this._transmit("DISCONNECT",g);this.ws.onclose=null;this.ws.close();this._cleanUp();return"function"===typeof b?b():void 0};k.prototype._cleanUp=function(){this.connected=!1;this.pinger&&b.clearInterval(this.pinger);if(this.ponger)return b.clearInterval(this.ponger)};k.prototype.send=function(b,g,h){null==g&&(g={});null==h&&(h="");g.destination=b;return this._transmit("SEND",g,h)};k.prototype.subscribe=function(b,g,h){var k;null==h&&(h={});h.id||(h.id="sub-"+this.counter++);h.destination=b;this.subscriptions[h.id]=
g;this._transmit("SUBSCRIBE",h);k=this;return{id:h.id,unsubscribe:function(){return k.unsubscribe(h.id)}}};k.prototype.unsubscribe=function(b){delete this.subscriptions[b];return this._transmit("UNSUBSCRIBE",{id:b})};k.prototype.begin=function(b){var g,h;h=b||"tx-"+this.counter++;this._transmit("BEGIN",{transaction:h});g=this;return{id:h,commit:function(){return g.commit(h)},abort:function(){return g.abort(h)}}};k.prototype.commit=function(b){return this._transmit("COMMIT",{transaction:b})};k.prototype.abort=
function(b){return this._transmit("ABORT",{transaction:b})};k.prototype.ack=function(b,g,h){null==h&&(h={});h["message-id"]=b;h.subscription=g;return this._transmit("ACK",h)};k.prototype.nack=function(b,g,h){null==h&&(h={});h["message-id"]=b;h.subscription=g;return this._transmit("NACK",h)};return k}();b={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(k,l){var d;null==l&&(l=["v10.stomp","v11.stomp"]);d=new (b.WebSocketClass||WebSocket)(k,
l);return new n(d)},over:function(b){return new n(b)},Frame:l};"undefined"!==typeof exports&&null!==exports&&(exports.Stomp=b);"undefined"!==typeof window&&null!==window?(b.setInterval=function(b,l){return window.setInterval(l,b)},b.clearInterval=function(b){return window.clearInterval(b)},window.Stomp=b):exports||(self.Stomp=b)}).call(this);